<html>
<head>
<meta http-equiv="pragma" content="no-cache">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Generator" content="Asbru Web Content Management System">
<meta http-equiv="Copyright" content="(C) 2002-2014 - Asbru Ltd. - www.asbrusoft.com">
<script type="text/javascript" src="webeditor.properties.js"></script>
<title>Asbru Web Content Editor</title>
<link rel="stylesheet" href="dtree.css" type="text/css">
<script type="text/javascript" src="dtree.js"></script>
<link rel="stylesheet" type="text/css" href="webeditor.css">
<script type="text/javascript">

document.title = HtmlDecode(Text('medialistfilter_title'));

function requestParameter(name) {
	var value = "";
	if (start = request.indexOf("?"+name+"=")+1) {
		value = request.substring(start+name.length+1);
	} else if (start = request.indexOf("&"+name+"=")+1) {
		value = request.substring(start+name.length+1);
	}
	if (value.indexOf("&")+1) {
		value = value.substring(0, value.indexOf("&"));
	}
	value = unescape(decodeURI(value));
	return value;
}

var request = "" + window.location;
editor = requestParameter("editor");
if ((typeof(webeditor) == "undefined") && editor && window.parent.opener && window.parent.opener[editor]) webeditor = window.parent.opener[editor];
if ((typeof(webeditor) == "undefined") && editor && window.opener && window.opener[editor]) webeditor = window.opener[editor];
if ((typeof(webeditor) == "undefined") && editor && top.opener && top.opener[editor]) webeditor = top.opener[editor];
if ((typeof(webeditor) == "undefined") && editor && top && top[editor]) webeditor = top[editor];
if ((typeof(webeditor) == "undefined") && editor && parent && parent[editor]) webeditor = parent[editor];

function openit(category,title) {
<% if ((myconfig.get(db, "superadmin").equals(mysession.get("username"))) && (myconfig.get(db, "use_contentdefinition").equals("yes")) && ((myconfig.get(db, "use_imagegroups").equals("yes")) || (myconfig.get(db, "use_imagetypes").equals("yes")))) { %>
	if ((category != 'imagetype') && (category != 'imagegroup')) {
		if (document.getElementById) {
			document.getElementById('create').href = 'javascript:alert(\'' + HtmlDecode(Text('medialistfilter_creategrouptype')) + '\');';
			document.getElementById('update').href = 'javascript:alert(\'' + HtmlDecode(Text('medialistfilter_updategrouptype')) + '\');';
			document.getElementById('delete').href = 'javascript:alert(\'' + HtmlDecode(Text('medialistfilter_deletegrouptype')) + '\');';
		} else if (document.all) {
			document.all['create'].href = 'javascript:alert(\'' + HtmlDecode(Text('medialistfilter_creategrouptype')) + '\');';
			document.all['update'].href = 'javascript:alert(\'' + HtmlDecode(Text('medialistfilter_updategrouptype')) + '\');';
			document.all['delete'].href = 'javascript:alert(\'' + HtmlDecode(Text('medialistfilter_deletegrouptype')) + '\');';
		}
	} else {
		if (document.getElementById) {
			document.getElementById('create').href = '<% if (myconfig.get(db, "superadmin").equals(mysession.get("username"))) { %>mediacategory.jsp?action=Create&category='+category+'&title='+title+'&editor=<%= html.encodeHtmlEntities(myrequest.getParameter("editor")) %><% } else { %>javascript:;<% } %>';
			if (title != '') {
				document.getElementById('update').href = '<% if (myconfig.get(db, "superadmin").equals(mysession.get("username"))) { %>mediacategory.jsp?action=Update&category='+category+'&title='+title+'&editor=<%= html.encodeHtmlEntities(myrequest.getParameter("editor")) %><% } else { %>javascript:;<% } %>';
				document.getElementById('delete').href = '<% if (myconfig.get(db, "superadmin").equals(mysession.get("username"))) { %>mediacategory.jsp?action=Delete&category='+category+'&title='+title+'&editor=<%= html.encodeHtmlEntities(myrequest.getParameter("editor")) %><% } else { %>javascript:;<% } %>';
			} else {
				document.getElementById('update').href = 'javascript:alert(\'' + HtmlDecode(Text('medialistfilter_updategrouptype')) + '\');';
				document.getElementById('delete').href = 'javascript:alert(\'' + HtmlDecode(Text('medialistfilter_deletegrouptype')) + '\');';
			}
		} else if (document.all) {
			document.all['create'].href = '<% if (myconfig.get(db, "superadmin").equals(mysession.get("username"))) { %>mediacategory.jsp?action=Create&category='+category+'&title='+title+'&editor=<%= html.encodeHtmlEntities(myrequest.getParameter("editor")) %><% } else { %>javascript:;<% } %>';
			if (title != '') {
				document.all['update'].href = '<% if (myconfig.get(db, "superadmin").equals(mysession.get("username"))) { %>mediacategory.jsp?action=Update&category='+category+'&title='+title+'&editor=<%= html.encodeHtmlEntities(myrequest.getParameter("editor")) %><% } else { %>javascript:;<% } %>';
				document.all['delete'].href = '<% if (myconfig.get(db, "superadmin").equals(mysession.get("username"))) { %>mediacategory.jsp?action=Delete&category='+category+'&title='+title+'&editor=<%= html.encodeHtmlEntities(myrequest.getParameter("editor")) %><% } else { %>javascript:;<% } %>';
			} else {
				document.all['update'].href = 'javascript:alert(\'' + HtmlDecode(Text('medialistfilter_updategrouptype')) + '\');';
				document.all['delete'].href = 'javascript:alert(\'' + HtmlDecode(Text('medialistfilter_deletegrouptype')) + '\');';
			}
		}
	}
<% } %>
	parent.ready_category = category;
	parent.ready_title = title;
	if (parent.medialist && parent.medialist.medialistMenu) parent.medialist.medialistMenu.clearCookie();
	if (parent.medialist && parent.medialist.location) parent.medialist.location.href = 'medialist_bizcard.jsp?editor=' + editor + '&category='+category+'&title='+encodeURIComponent(title);
}

</script>
</head>
<body onload="parent.medialistfilter_ready();">
<div class="dtree">
	&nbsp;
</div>
<hr>
<div class="dtree">
	<script type="text/javascript">
		<!--
		menuitem = 0;
		medialistfilterMenu = new dTree('medialistfilterMenu');
		medialistfilterMenu.clearCookie();
		menuitem_images = menuitem;
		medialistfilterMenu.add(menuitem++,-1,Text('medialistfilter_images'),'');
		medialistfilterMenu.add(menuitem++,menuitem_images,Text('medialistfilter_images_all'),'javascript:openit(\'all\',\'' + Text('medialistfilter_images_all') + '\')','','','','imgfolder.gif');
<% if (myconfig.get(db, "use_imagegroups").equals("yes")) { %>
		menuitem_images_groups = menuitem;
		medialistfilterMenu.add(menuitem++,menuitem_images,Text('medialistfilter_imagegroups'),'javascript:openit(\'imagegroup\',\'\')','','',true,'');
		<%= Imagegroup.dtree_options(db, "medialistfilterMenu.add(menuitem++,menuitem_images_groups,'", "','javascript:openit(\\'imagegroup\\',\\'", "\\')','','','','imgfolder.gif');" + "\r\n") %> 
<% } %>
<% if (myconfig.get(db, "use_imagetypes").equals("yes")) { %>
		menuitem_images_types = menuitem;
		medialistfilterMenu.add(menuitem++,menuitem_images,Text('medialistfilter_imagetypes'),'javascript:openit(\'imagetype\',\'\')','','',true,'');
		<%= Imagetype.dtree_options(db, "medialistfilterMenu.add(menuitem++,menuitem_images_types,'", "','javascript:openit(\\'imagetype\\',\\'", "\\')','','','','imgfolder.gif');" + "\r\n") %> 
<% } %>
		medialistfilterMenu.draw();
		//-->
	</script>
</div>
</body>
</html>
