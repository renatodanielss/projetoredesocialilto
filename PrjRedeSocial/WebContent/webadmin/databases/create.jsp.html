<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<!--[if lt IE 7]><html class="ie6"><![endif]-->
<!--[if IE 7]><html class="ie7"><![endif]-->
<!--[if IE 8]><html class="ie8"><![endif]-->
<!--[if IE 9]><html class="ie9"><![endif]-->
<!--[if IE 10]><html class="ie10"><![endif]-->
<!--[if gt IE 10]><html><![endif]-->
<!--[if !IE]><!--><html><!--<![endif]-->
<!-- #BeginTemplate "/Templates/admin.jsp.dwt" --><!-- DW6 -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=<%= myconfig.get(db, "charset") %>">
<meta http-equiv="Generator" content="<%= mytext.display("product") %> <%= mytext.display("version") %>">
<meta http-equiv="Copyright" content="<%= mytext.display("copyright") %>">
<%@ include file="/webadmin/scripts.jsp.html" %>
<!-- #BeginEditable "doctitle" -->
<title><%= mytext.display("databases.create.title") %></title>
<script type="text/javascript">

$(function(){
	initForm();
	mySlideTabs = $('#tabs').slidetabs({ autoHeight: true, externalLinking: true, urlLinking: true, responsive: true });
	$('#tabs').find('[rel=Database_Content]').click();
});

</script>

<%
String mywebeditor = "HardCore";
mywebeditor = "/" + mytext.display("adminpath") + "/webeditors/" + mywebeditor + "/webeditor.jsp";
%>
<jsp:include page="<%= mywebeditor %>" />

<script type="text/javascript">

<% if (! adminuser.getHardcoreCustomScript().equals("")) { %>
<%= adminuser.getHardcoreCustomScript() %>
<% } else { %>
<%= myconfig.get(db, "hardcore_customscript") %>
<% } %>

</script>

<script type="text/javascript">

function changeUsers(user) {
	var users = "";
	for (var i=0; i<user.options.length; i++) {
		if (user.options[i].selected && user.options[i].value) {
			if (users != "") users += ",";
			users += user.options[i].value;
		}
	}
	users = users.replace(/^-/, "");
	document.getElementById(user.id+"input").value = users;
}

// MSIE document.getElementById may be broken also returning elements by NAME instead of just by ID
if (/msie/i.test (navigator.userAgent)) {
	document.nativeGetElementById = document.getElementById;
	document.getElementById = function(id) {
		var elem = document.nativeGetElementById(id);
		if (elem) {
			if (elem.id == id) {
				return elem;
			} else {
				for (var i=1; i<document.all[id].length; i++) {
					if (document.all[id][i].id == id) {
						return document.all[id][i];
					}
				}
			}
		}
		return null;
	};
}

function openSelectContentItem(inputid, section, category, title, href_contentclass) {
	var inputnode = document.getElementById(inputid);
	if (inputnode && inputnode.options) {
		var contenttitle;
		var contentid;
		var contenthref;
		if (inputnode.selectedIndex >= 0) {
			contenttitle = inputnode.options[inputnode.selectedIndex].text;
			contentid = inputnode.options[inputnode.selectedIndex].value;
			contenthref = '/' + href_contentclass + '.jsp%3Fid%3D' + contentid;
		}
		if (! ((contentid > 0) && (contenttitle != ""))) {
			contentid = '';
			contenttitle = '';
			contenthref = '';
		}
		webeditor.window_proxy['selector'] = webeditor;
		webeditor_window('/<%= mytext.display("adminpath") %>/webeditor/selectormanager_wcm.jsp?editor=selector&input=' + encodeURIComponent(inputid) + '&section=' + encodeURIComponent(section) + '&category=' + encodeURIComponent(category) + '&title=' + encodeURIComponent(title) + '&id=' + encodeURIComponent(contentid) + '&link=' + encodeURIComponent(contenttitle) + '&href=' + encodeURIComponent(contenthref), 'selector_window', 750, 450, 'scrollbars=yes,width=750,height=450,resizable=yes,status=yes', true);
	}
}

function selectContentItem(inputid, contentid, contenttitle, href) {
	var inputnode = document.getElementById(inputid);
	if (inputnode && inputnode.options && (contentid != "") && (contenttitle != "")) {
		var selected = false;
		if (inputnode.type == "select-multiple") {
			if (! selected) for (var i=0; i<inputnode.options.length; i++) {
				if ((inputnode.options[i].text.toLowerCase() == contenttitle.toLowerCase()) && (inputnode.options[i].value == contentid)) {
					inputnode.options[i].selected = true;
					selected = true;
					break;
				}
			}
			var newoption = new Option(contenttitle, contentid, true, true);
			if (! selected) for (var i=inputnode.options.length; i>0; i--) {
				if (inputnode.options[i-1].text.toLowerCase() > contenttitle.toLowerCase()) {
					var oldoption = inputnode.options[i-1];
					oldoption = new Option(oldoption.text, oldoption.value, oldoption.defaultSelected, oldoption.selected);
					inputnode.options[i] = new Option("", "", true, true);
					inputnode.options[i-1] = newoption;
					inputnode.options[i] = oldoption;
					selected = true;
				} else {
					inputnode.options[i] = newoption;
					selected = true;
					break;
				}
			}
			if (! selected) {
				inputnode.options[inputnode.options.length] = newoption;
			}
			inputnode.size = inputnode.options.length;
			if (inputid == "stylesheet") changeWebEditorStylesheet(inputnode);
			if (inputid == "scripts") changeScripts(inputnode);
			if (inputid.match(/_users$/)) changeUsers(inputnode);
		} else {
			inputnode.options[0].text = contenttitle;
			inputnode.options[0].value = contentid;
			inputnode.selectedIndex = 0;
			if (inputnode.onchange) {
				inputnode.onchange();
			}
		}
	}
}

</script>
<script type="text/javascript">

var columnCount = 0;

function initForm() {
	columnCount = 0;
	var content = document.getElementById("content").value;
	var columns = content.split(/\r?\n/);
	var ordered = new Array();
	for (var column in columns) if (typeof(columns[column]) != "undefined") {
		var params = columns[column].split("|");
		ordered[params[1]] = params;
	}
	for (var column=0; column<ordered.length; column++) {
		var params = ordered[column];
		if (params && params[0]) {
			var options = "";
			for (var i=7; i<params.length; i++) {
				if (options) options += "\r\n";
				options += params[i];
			}
			addColumn(params[0], params[2], params[4], params[5], params[6], params[3], params[1], options);
		}
	}
	document.getElementById("name").value = "";
	document.getElementById("type").value = "";
}

function doSubmit() {
	var result = true;
	var content = '';

	var title = document.getElementById("title").value.replace(/\s/g, "");
	if (! title.match(/^[a-z][a-z0-9]+$/i)) {
		alert('<%= mytext.display("databases.content.title.error.invalid") %>: ' + document.getElementById("title").value);
		result = false;
	}

	var names = new Object();
	for (var i=1; i<=columnCount; i++) {
		if (document.getElementById("name" + i) && document.getElementById("type" + i)) { 
			var name = document.getElementById("name" + i).value;
			if (! name.match(/^[- ,_a-z0-9]+$/i)) {
				alert('<%= mytext.display("databases.content.name.error.invalid") %>: ' + document.getElementById("name" + i).value);
				result = false;
			}
			if (names[name]) {
				alert('<%= mytext.display("databases.content.name.error.notunique") %>: ' + document.getElementById("name" + i).value);
				result = false;
			}
			names[name] = true;
			var type = document.getElementById("type" + i).value;
			var index = document.getElementById("index" + i).checked ? document.getElementById("index" + i).value : '';
			var order = document.getElementById("order" + i).value;
			switch(type) {
			case "text":
				var cols = document.getElementById("cols" + i).value;
				var rows = document.getElementById("rows" + i).value;
				content += '' + i + '|' + order + '|' + name + '|' + index + '|' + type + '|' + cols + '|' + rows + '\r\n';
				break;
			case "html":
				var width = document.getElementById("width" + i).value;
				var height = document.getElementById("height" + i).value;
				content += '' + i + '|' + order + '|' + name + '|' + index + '|' + type + '|' + width + '|' + height + '\r\n';
				break;
			case "number":
				var digits = document.getElementById("digits" + i).value;
				var decimals = document.getElementById("decimals" + i).value;
				content += '' + i + '|' + order + '|' + name + '|' + index + '|' + type + '|' + digits + '|' + decimals + '\r\n';
				break;
			case "select":
				var size = document.getElementById("size" + i).value;
				var options = document.getElementById("options" + i).value;
				options = options.replace(/\r\n/g, "|").replace(/\r/g, "|").replace(/\n/g, "|");
				content += '' + i + '|' + order + '|' + name + '|' + index + '|' + type + '|' + size + '||' + options + '\r\n';
				break;
			case "selectmulti":
				var size = document.getElementById("size" + i).value;
				var options = document.getElementById("options" + i).value;
				options = options.replace(/\r\n/g, "|").replace(/\r/g, "|").replace(/\n/g, "|");
				content += '' + i + '|' + order + '|' + name + '|' + index + '|' + type + '|' + size + '||' + options + '\r\n';
				break;
			case "radio":
				var options = document.getElementById("options" + i).value;
				options = options.replace(/\r\n/g, "|").replace(/\r/g, "|").replace(/\n/g, "|");
				content += '' + i + '|' + order + '|' + name + '|' + index + '|' + type + '|||' + options + '\r\n';
				break;
			case "checkbox":
				var options = document.getElementById("options" + i).value;
				options = options.replace(/\r\n/g, "|").replace(/\r/g, "|").replace(/\n/g, "|");
				content += '' + i + '|' + order + '|' + name + '|' + index + '|' + type + '|||' + options + '\r\n';
				break;
			case "datetime":
				var format = document.getElementById("format" + i).value;
				content += '' + i + '|' + order + '|' + name + '|' + index + '|' + type + '|' + format + '\r\n';
				break;
			case "element":
				var contentclass = document.getElementById("contentclass" + i).value;
				var size = document.getElementById("size" + i).value;
				content += '' + i + '|' + order + '|' + name + '|' + index + '|' + type + '|' + size + '|' + contentclass + '\r\n';
				break;
			case "elements":
				var contentclass = document.getElementById("contentclass" + i).value;
				var size = document.getElementById("size" + i).value;
				content += '' + i + '|' + order + '|' + name + '|' + index + '|' + type + '|' + size + '|' + contentclass + '\r\n';
				break;
			case "datum":
			case "data":
			case "datumview":
			case "dataview":
				var size = document.getElementById("size" + i).value;
				var database = document.getElementById("database" + i).value;
				var data = document.getElementById("data" + i).value;
				content += '' + i + '|' + order + '|' + name + '|' + index + '|' + type + '|' + size + '|' + database + '|' + data + '\r\n';
				break;
			case "content":
			case "contents":
			case "contentclasse":
			case "contentclasses":
			case "contentgroup":
			case "contentgroups":
			case "contenttype":
			case "contenttypes":
			case "page":
			case "pages":
			case "pagegroup":
			case "pagegroups":
			case "pagetype":
			case "pagetypes":
			case "image":
			case "images":
			case "imagegroup":
			case "imagegroups":
			case "imagetype":
			case "imagetypes":
			case "imageformat":
			case "imageformats":
			case "file":
			case "files":
			case "filegroup":
			case "filegroups":
			case "filetype":
			case "filetypes":
			case "fileformat":
			case "fileformats":
			case "link":
			case "links":
			case "linkgroup":
			case "linkgroups":
			case "linktype":
			case "linktypes":
			case "product":
			case "products":
			case "productgroup":
			case "productgroups":
			case "producttype":
			case "producttypes":
			case "version":
			case "versions":
			case "database":
			case "databases":
			case "datum":
			case "data":
			case "datumview":
			case "dataview":
			case "username":
			case "usernames":
			case "useremail":
			case "useremails":
			case "usergroup":
			case "usergroups":
			case "usertype":
			case "usertypes":
				var size = document.getElementById("size" + i).value;
				content += '' + i + '|' + order + '|' + name + '|' + index + '|' + type + '|' + size + '\r\n';
				break;
			default:
				content += '' + i + '|' + order + '|' + name + '|' + index + '|' + type + '|\r\n';
				break;
			}
		}
	}
	document.getElementById("content").value = content;
	return result;
}

function addColumn(id, name, type, param1, param2, index, order, params) {
	if (! name) {
		name = document.getElementById("name").value;
	} else {
		document.getElementById("name").value = name;
	}
	if (! type) {
		type = document.getElementById("type").value;
	} else {
		document.getElementById("type").value = type;
	}
	var typetext = document.getElementById("type").options[document.getElementById("type").selectedIndex].text;

	if (name && type) {
		if (! id) {
			columnCount += 1;
			id = columnCount;
		} else {
			if (id > columnCount) columnCount = parseInt(id);
		}

		var tr = document.createElement("tr");
		tr.setAttribute("id", "column" + id);
		tr.setAttribute("vAlign", "top");
		tr.style.backgroundColor = "#eeeeee";
		var td;
		td = document.createElement("td");
		td.innerHTML = '<input type="button" onClick="deleteColumn(' + id + ')" value="<%= mytext.display("databases.column.delete") %>">';
		tr.appendChild(td);
		td = document.createElement("td");
		td.innerHTML = '<input type="text" id="name' + id + '" name="name' + id + '" value="' + name + '">';
		tr.appendChild(td);
		td = document.createElement("td");
		td.innerHTML = '<select readonly id="type' + id + '"name="type' + id + '"><option value="' + type + '">' + typetext + '</option></select>';
		tr.appendChild(td);

		switch(type) {
		case "text":
			var cols = param1 || "80";
			var rows = param2 || "1";
			td = document.createElement("td");
			td.innerHTML = '<nobr><%= mytext.display("databases.text.cols") %> <input type="text" size="3" maxlength="3" id="cols' + id + '" name="cols' + id + '" value="' + cols + '"></nobr> <nobr><%= mytext.display("databases.text.rows") %> <input type="text" size="3" maxlength="3" id="rows' + id + '" name="rows' + id + '" value="' + rows + '">';
			tr.appendChild(td);
			break;
		case "html":
			var width = param1 || "800";
			var height = param2 || "600";
			td = document.createElement("td");
			td.innerHTML = '<nobr><%= mytext.display("databases.html.width") %> <input type="text" size="3" maxlength="3" id="width' + id + '" name="width' + id + '" value="' + width + '"></nobr> <nobr><%= mytext.display("databases.html.height") %> <input type="text" size="3" maxlength="3" id="height' + id + '" name="height' + id + '" value="' + height + '">';
			tr.appendChild(td);
			break;
		case "number":
			var digits = param1 || "9";
			var decimals = param2 || "2";
			td = document.createElement("td");
			td.innerHTML = '<nobr><%= mytext.display("databases.number.digits") %> <input type="text" size="2" maxlength="2" id="digits' + id + '" name="digits' + id + '" value="' + digits + '"></nobr> <nobr><%= mytext.display("databases.number.decimals") %> <input type="text" size="2" maxlength="2" id="decimals' + id + '" name="decimals' + id + '" value="' + decimals + '">';
			tr.appendChild(td);
			break;
		case "select":
			var size = param1 || "";
			var options = params || "";
			td = document.createElement("td");
			td.innerHTML = '<nobr><%= mytext.display("databases.select.size") %> <input type="text" size="3" maxlength="3" id="size' + id + '" name="size' + id + '" value="' + size + '"></nobr><br><nobr><%= mytext.display("databases.select.options") %></nobr><br><textarea cols="40" rows="5" wrap="off" id="options' + id + '" name="options' + id + '">' + options + '</textarea>';
			tr.appendChild(td);
			break;
		case "selectmulti":
			var size = param1 || "";
			var options = params || "";
			td = document.createElement("td");
			td.innerHTML = '<nobr><%= mytext.display("databases.select.size") %> <input type="text" size="3" maxlength="3" id="size' + id + '" name="size' + id + '" value="' + size + '"></nobr><br><nobr><%= mytext.display("databases.select.options") %></nobr><br><textarea cols="40" rows="5" wrap="off" id="options' + id + '" name="options' + id + '">' + options + '</textarea>';
			tr.appendChild(td);
			break;
		case "radio":
			var options = params || "";
			td = document.createElement("td");
			td.innerHTML = '<nobr><%= mytext.display("databases.radio.options") %></nobr><br><textarea cols="40" rows="5" wrap="off" id="options' + id + '" name="options' + id + '">' + options + '</textarea>';
			tr.appendChild(td);
			break;
		case "checkbox":
			var options = params || "";
			td = document.createElement("td");
			td.innerHTML = '<nobr><%= mytext.display("databases.checkbox.options") %></nobr><br><textarea cols="40" rows="5" wrap="off" id="options' + id + '" name="options' + id + '">' + options + '</textarea>';
			tr.appendChild(td);
			break;
		case "datetime":
			var format = param1 || "YYYY-mm-dd HH:MM:SS";
			td = document.createElement("td");
			td.innerHTML = '<nobr><%= mytext.display("databases.datetime.format") %> </nobr><input type="text" size="30" id="format' + id + '" name="format' + id + '" value="' + format + '">';
			tr.appendChild(td);
			break;
		case "element":
			var size = param1 || "";
			var options = '<option value="">&nbsp;<%= Common.select_options(db, "elements", "element", "") %>';
			options = options.replace('value="'+param2+'"', 'value="'+param2+'" selected');
 			td = document.createElement("td");
			td.innerHTML = '<nobr><%= mytext.display("databases.select.size") %> <input type="text" size="3" maxlength="3" id="size' + id + '" name="size' + id + '" value="' + size + '"></nobr> <nobr><%= mytext.display("databases.element.contentclass") %> <select id="contentclass' + id + '" name="contentclass' + id + '">' + options + '</select></nobr>';
			tr.appendChild(td);
			break;
		case "elements":
			var size = param1 || "";
			var options = '<option value="">&nbsp;<%= Common.select_options(db, "elements", "element", "") %>';
			options = options.replace('value="'+param2+'"', 'value="'+param2+'" selected');
			td = document.createElement("td");
			td.innerHTML = '<nobr><%= mytext.display("databases.select.size") %> <input type="text" size="3" maxlength="3" id="size' + id + '" name="size' + id + '" value="' + size + '"></nobr> <nobr><%= mytext.display("databases.element.contentclass") %> <select id="contentclass' + id + '" name="contentclass' + id + '">' + options + '</select></nobr>';
			tr.appendChild(td);
			break;
		case "datum":
		case "data":
			var size = param1 || "";
			var database = param2 || "";
			var data = params || "";
			td = document.createElement("td");
			td.innerHTML = '<nobr><%= mytext.display("databases.select.size") %> <input type="text" size="3" maxlength="3" id="size' + id + '" name="size' + id + '" value="' + size + '"></nobr><br><nobr><%= mytext.display("databases.data.database") %> <input type="text" maxlength="255" id="database' + id + '" name="database' + id + '" value="' + database + '"></nobr><br><nobr><%= mytext.display("databases.data.column") %> <input type="text" maxlength="255" id="data' + id + '" name="data' + id + '" value="' + data + '"></nobr>';
			tr.appendChild(td);
			break;
		case "datumview":
		case "dataview":
			var size = param1 || "";
			var database = param2 || "";
			var data = params || "";
			td = document.createElement("td");
			td.innerHTML = '<nobr><%= mytext.display("databases.select.size") %> <input type="text" size="3" maxlength="3" id="size' + id + '" name="size' + id + '" value="' + size + '"></nobr><br><nobr><%= mytext.display("databases.data.database") %> <input type="text" size="50" maxlength="255" id="database' + id + '" name="database' + id + '" value="' + database + '"></nobr><br><nobr><%= mytext.display("databases.data.column") %> <input type="text" size="50" maxlength="255" id="data' + id + '" name="data' + id + '" value="' + data + '"></nobr>';
			tr.appendChild(td);
			break;
		case "content":
		case "contents":
		case "contentclass":
		case "contentclasses":
		case "contentgroup":
		case "contentgroups":
		case "contenttype":
		case "contenttypes":
		case "page":
		case "pages":
		case "pagegroup":
		case "pagegroups":
		case "pagetype":
		case "pagetypes":
		case "image":
		case "images":
		case "imagegroup":
		case "imagegroups":
		case "imagetype":
		case "imagetypes":
		case "imageformat":
		case "imageformats":
		case "file":
		case "files":
		case "filegroup":
		case "filegroups":
		case "filetype":
		case "filetypes":
		case "fileformat":
		case "fileformats":
		case "link":
		case "links":
		case "linkgroup":
		case "linkgroups":
		case "linktype":
		case "linktypes":
		case "product":
		case "products":
		case "productgroup":
		case "productgroups":
		case "producttype":
		case "producttypes":
		case "version":
		case "versions":
		case "database":
		case "databases":
		case "username":
		case "usernames":
		case "useremail":
		case "useremails":
		case "usergroup":
		case "usergroups":
		case "usertype":
		case "usertypes":
			var size = param1 || "";
			td = document.createElement("td");
			td.innerHTML = '<nobr><%= mytext.display("databases.select.size") %> <input type="text" size="3" maxlength="3" id="size' + id + '" name="size' + id + '" value="' + size + '"></nobr>';
			tr.appendChild(td);
			break;
		default:
			td = document.createElement("td");
			td.innerHTML = '&nbsp;';
			tr.appendChild(td);
			break;
		}

		td = document.createElement("td");
		if (index) {
			td.innerHTML = '<input type="checkbox" id="index' + id + '" name="index' + id + '" value="index" checked>';
		} else {
			td.innerHTML = '<input type="checkbox" id="index' + id + '" name="index' + id + '" value="index">';
		}
		tr.appendChild(td);

		td = document.createElement("td");
		if (order) {
			td.innerHTML = '<input type="hidden" id="order' + id + '" name="order' + id + '" value="' + order + '"><input type="button" onClick="moveColumnUp(' + id + ')" value="<%= mytext.display("databases.column.moveup") %>"><input type="button" onClick="moveColumnDown(' + id + ')" value="<%= mytext.display("databases.column.movedown") %>">';
		} else {
			td.innerHTML = '<input type="hidden" id="order' + id + '" name="order' + id + '" value="' + id + '"><input type="button" onClick="moveColumnUp(' + id + ')" value="<%= mytext.display("databases.column.moveup") %>"><input type="button" onClick="moveColumnDown(' + id + ')" value="<%= mytext.display("databases.column.movedown") %>">';
		}
		tr.appendChild(td);

		var insertpoint = document.getElementById("addnew");
		if (insertpoint && insertpoint.parentNode) insertpoint.parentNode.insertBefore(tr, insertpoint);

		if (mySlideTabs) mySlideTabs.tabs_resize();
	}
}

function deleteColumn(column) {
	var node = document.getElementById("column" + column);
	if (node && node.parentNode) node.parentNode.removeChild(node);
}

function moveColumnUp(column) {
	var node = document.getElementById("column" + column);
	var order = document.getElementById("order" + column).value;
	if (node && node.parentNode && node.previousSibling && (order>1)) {
		var parentnode = node.parentNode;
		var prevnode = node.previousSibling;

		var tmp = document.getElementById("order" + prevnode.id.substring(6)).value;
		document.getElementById("order" + prevnode.id.substring(6)).value = order;
		document.getElementById("order" + node.id.substring(6)).value = tmp;

		parentnode.removeChild(node);
		parentnode.insertBefore(node, prevnode);
	}
}

function moveColumnDown(column) {
	var node = document.getElementById("column" + column);
	var order = document.getElementById("order" + column).value;
	if (node && node.parentNode && node.previousSibling && (order<columnCount)) {
		var parentnode = node.parentNode;
		var nextnode = node.nextSibling;

		var tmp = document.getElementById("order" + nextnode.id.substring(6)).value;
		document.getElementById("order" + nextnode.id.substring(6)).value = order;
		document.getElementById("order" + node.id.substring(6)).value = tmp;

		parentnode.removeChild(nextnode);
		parentnode.insertBefore(nextnode, node);
	}
}

</script>
<!-- #EndEditable -->
<%
	if (! myrequest.getParameter("menu").equals("")) {
		mysession.set("menu", myrequest.getParameter("menu"));
	}
%>
</head>
<body>
<div class="ui-layout-north">
<div class="ui-layout-content">
<table class="WCMheaderwrapper"><tr><td>
<table class="WCMheader">
  <tr>
    <td class="WCMheader"><%= mytext.display("logo") %></td>
    <td class="WCMlogin"><% if (! mysession.get("username").equals("")) { %><%= mytext.display("loggedin") %> <%= mysession.get("username") %><% } %></td>
    <td class="WCMtitle"><!-- #BeginEditable "TITLE" --><%= mytext.display("databases.create.title") %><!-- #EndEditable --></td>
  </tr>
</table>
</td></tr><tr><td>
<%@ include file="/webadmin/header.jsp.html" %>
</td></tr></table>
</div>
</div>
<div class="ui-layout-west">
<div class="ui-layout-content">
<% String myjspincludepage = "/" + mytext.display("adminpath") + "/menu.jsp"; %><jsp:include page="<%= myjspincludepage  %>" />
<!-- #BeginEditable "MENU" -->
<!-- #EndEditable -->
</div>
</div>
<div class="ui-layout-east">
<div class="ui-layout-content">
</div>
</div>
<div class="ui-layout-center">

<!-- #BeginEditable "MAIN" -->

<div id="WCMadminpage" class="WCMadminpage WCMadmintabs"><div id="WCMadminpagewrapper" class="WCMadminpagewrapper">

      <form action="create_post.jsp" method="POST" onSubmit="return doSubmit();">
        <input type="hidden" id="content" name="content" value="<%= databases.getContent() %>">
        <p>
          <input type="submit" value="<%= mytext.display("save") %>">
        </p>

<div id="tabs" class="wcm-horizontal">

    <div class="st_tabs" onclick="return false;">
        <div class="st_tabs_wrap">
            <ul class="st_tabs_ul">
                <li><a href="#Database_Content" rel="Database_Content"><%= mytext.display("databases.databasecontent.tab") %></a></li>
                <li><a href="#Access_Restrictions" rel="Access_Restrictions"><%= mytext.display("databases.accessrestrictions.tab") %></a></li>
                <li><a href="#Special_Pages" rel="Special_Pages"><%= mytext.display("databases.specialpages.tab") %></a></li>
            </ul>
        </div>
    </div>

    <div class="st_views">

<div id="Database_Content" class="Database_Content st_view"><div class="st_view_inner">
        <table width="100%">
          <tr> 
            <th class="WCMinnerContentHeading1" colspan="6" align="left"><%= mytext.display("databases.heading") %></th>
          </tr>
          <tr> 
            <td class="WCMinnerContentIntro" colspan="6" align="left"><%= mytext.display("databases.intro") %></td>
          </tr>
          <tr> 
            <th class="WCMinnerContentInputName" colspan="6" align="left"><%= mytext.display("databases.title") %></th>
          </tr>
          <tr> 
            <td class="WCMinnerContentInputValue" colspan="6">
              <input type="text" size="80" maxlength="250" id="title" name="title" value="<%= databases.getTitle() %>">
            </td>
          </tr>
          <tr><td>&nbsp;</td></tr>
          <tr> 
            <th class="WCMinnerContentHeading1" colspan="6" align="left"><%= mytext.display("databases.content") %></th>
          </tr>
          <tr>
            <th></th>
            <th class="WCMinnerContentInputName" align="left"><%= mytext.display("databases.content.name") %></th>
            <th class="WCMinnerContentInputName" align="left"><%= mytext.display("databases.content.type") %></th>
            <th class="WCMinnerContentInputName" align="left"><%= mytext.display("databases.content.properties") %></th>
            <th class="WCMinnerContentInputName" align="left"><%= mytext.display("databases.content.index") %></th>
          </tr>
          <tr id="addnew">
            <td>
              <input type="button" value="<%= mytext.display("addnew") %>" onClick="addColumn(false,false,false,false,false)">
            </td>
            <td><input id="name" type="text" name="name"></td>
            <td>
              <select id="type" name="type">
                <option value="">
                <option value="text"><%= mytext.display("databases.content.type.text") %>
                <option value="html"><%= mytext.display("databases.content.type.html") %>
                <option value="number"><%= mytext.display("databases.content.type.number") %>
                <option value="select"><%= mytext.display("databases.content.type.select") %>
                <option value="selectmulti"><%= mytext.display("databases.content.type.selectmulti") %>
                <option value="radio"><%= mytext.display("databases.content.type.radio") %>
                <option value="checkbox"><%= mytext.display("databases.content.type.checkbox") %>
                <option value="datetime"><%= mytext.display("databases.content.type.datetime") %>
                <option value="created"><%= mytext.display("databases.content.type.created") %>
                <option value="updated"><%= mytext.display("databases.content.type.updated") %>
                <option value="createdby"><%= mytext.display("databases.content.type.createdby") %>
                <option value="updatedby"><%= mytext.display("databases.content.type.updatedby") %>
                <option value="content"><%= mytext.display("databases.content.type.content") %>
                <option value="contents"><%= mytext.display("databases.content.type.contents") %>
                <option value="contentclass"><%= mytext.display("databases.content.type.contentclass") %>
                <option value="contentclasses"><%= mytext.display("databases.content.type.contentclasses") %>
                <option value="contentgroup"><%= mytext.display("databases.content.type.contentgroup") %>
                <option value="contentgroups"><%= mytext.display("databases.content.type.contentgroups") %>
                <option value="contenttype"><%= mytext.display("databases.content.type.contenttype") %>
                <option value="contenttypes"><%= mytext.display("databases.content.type.contenttypes") %>
                <option value="page"><%= mytext.display("databases.content.type.page") %>
                <option value="pages"><%= mytext.display("databases.content.type.pages") %>
                <option value="pagegroup"><%= mytext.display("databases.content.type.pagegroup") %>
                <option value="pagegroups"><%= mytext.display("databases.content.type.pagegroups") %>
                <option value="pagetype"><%= mytext.display("databases.content.type.pagetype") %>
                <option value="pagetypes"><%= mytext.display("databases.content.type.pagetypes") %>
                <option value="image"><%= mytext.display("databases.content.type.image") %>
                <option value="images"><%= mytext.display("databases.content.type.images") %>
                <option value="imagegroup"><%= mytext.display("databases.content.type.imagegroup") %>
                <option value="imagegroups"><%= mytext.display("databases.content.type.imagegroups") %>
                <option value="imagetype"><%= mytext.display("databases.content.type.imagetype") %>
                <option value="imagetypes"><%= mytext.display("databases.content.type.imagetypes") %>
                <option value="imageformat"><%= mytext.display("databases.content.type.imageformat") %>
                <option value="imageformats"><%= mytext.display("databases.content.type.imageformats") %>
                <option value="file"><%= mytext.display("databases.content.type.file") %>
                <option value="files"><%= mytext.display("databases.content.type.files") %>
                <option value="filegroup"><%= mytext.display("databases.content.type.filegroup") %>
                <option value="filegroups"><%= mytext.display("databases.content.type.filegroups") %>
                <option value="filetype"><%= mytext.display("databases.content.type.filetype") %>
                <option value="filetypes"><%= mytext.display("databases.content.type.filetypes") %>
                <option value="fileformat"><%= mytext.display("databases.content.type.fileformat") %>
                <option value="fileformats"><%= mytext.display("databases.content.type.fileformats") %>
                <option value="link"><%= mytext.display("databases.content.type.link") %>
                <option value="links"><%= mytext.display("databases.content.type.links") %>
                <option value="linkgroup"><%= mytext.display("databases.content.type.linkgroup") %>
                <option value="linkgroups"><%= mytext.display("databases.content.type.linkgroups") %>
                <option value="linktype"><%= mytext.display("databases.content.type.linktype") %>
                <option value="linktypes"><%= mytext.display("databases.content.type.linktypes") %>
<% if (License.valid(db, myconfig, "ecommerce")) { %>
                <option value="product"><%= mytext.display("databases.content.type.product") %>
                <option value="products"><%= mytext.display("databases.content.type.products") %>
                <option value="productgroup"><%= mytext.display("databases.content.type.productgroup") %>
                <option value="productgroups"><%= mytext.display("databases.content.type.productgroups") %>
                <option value="producttype"><%= mytext.display("databases.content.type.producttype") %>
                <option value="producttypes"><%= mytext.display("databases.content.type.producttypes") %>
<% } %>
                <option value="element"><%= mytext.display("databases.content.type.element") %>
                <option value="elements"><%= mytext.display("databases.content.type.elements") %>
                <option value="version"><%= mytext.display("databases.content.type.version") %>
                <option value="versions"><%= mytext.display("databases.content.type.versions") %>
                <option value="database"><%= mytext.display("databases.content.type.database") %>
                <option value="databases"><%= mytext.display("databases.content.type.databases") %>
                <option value="datum"><%= mytext.display("databases.content.type.datum") %>
                <option value="data"><%= mytext.display("databases.content.type.data") %>
                <option value="datumview"><%= mytext.display("databases.content.type.datumview") %>
                <option value="dataview"><%= mytext.display("databases.content.type.dataview") %>
                <option value="username"><%= mytext.display("databases.content.type.username") %>
                <option value="usernames"><%= mytext.display("databases.content.type.usernames") %>
                <option value="useremail"><%= mytext.display("databases.content.type.useremail") %>
                <option value="useremails"><%= mytext.display("databases.content.type.useremails") %>
                <option value="usergroup"><%= mytext.display("databases.content.type.usergroup") %>
                <option value="usergroups"><%= mytext.display("databases.content.type.usergroups") %>
                <option value="usertype"><%= mytext.display("databases.content.type.usertype") %>
                <option value="usertypes"><%= mytext.display("databases.content.type.usertypes") %>
<!--
                <option value="fileupload"><%= mytext.display("databases.content.type.fileupload") %>
-->
              </select>
            </td>
            <td width="100%">&nbsp;</td>
            <td>&nbsp;</td>
            <td>&nbsp;</td>
          </tr>
        </table>
</div></div>
<div id="Access_Restrictions" class="Access_Restrictions st_view"><div class="st_view_inner">
        <table width="100%">
          <tr>
            <th class="WCMinnerContentHeading1" colspan="6" align="left"><%= mytext.display("databases.accessrestrictions.heading") %></th>
          </tr>
          <tr>
            <td class="WCMinnerContentIntro" colspan="6" align="left"><%= mytext.display("databases.accessrestrictions.intro") %></td>
          </tr>
	<% if (! myconfig.get(db, "use_accessrestrictions").equals("none")) { %>
		<% if (myconfig.get(db, "use_userdefinition").equals("yes")) { %>
          <tr><th class="WCMinnerContentInputName" colspan="6" align="left"><%= mytext.display("databases.accessrestrictions.users") %></th></tr>
          <tr>
			<% if (myconfig.get(db, "use_usergroups").equals("yes")) { %>
            <td class="WCMinnerContentInputName" width="50" valign="top"><%= mytext.display("databases.accessrestrictions.group") %></td>
            <td class="WCMinnerContentInputValue" valign="top">
              <select name="users_group">
                <option value="<%= databases.getUsersGroup() %>"><%= mytext.display("pleaseselect") %>
                <option value="" <% if (databases.getUsersGroup().equals("")) { %>selected<% } %>><%= mytext.display("public") %>
                <option value="*" <% if (databases.getUsersGroup().equals("*")) { %>selected<% } %>><%= mytext.display("restricted") %>
                <option value="=" <% if (databases.getUsersGroup().equals("=")) { %>selected<% } %>><%= mytext.display("creator") %>
                <%= databases.usergroup_select_options(db, databases.getUsersGroup()) %>
              </select>
            </td>
			<% } %>
			<% if (myconfig.get(db, "use_usertypes").equals("yes")) { %>
            <td class="WCMinnerContentInputName" width="50" valign="top"><%= mytext.display("databases.accessrestrictions.type") %></td>
            <td class="WCMinnerContentInputValue" valign="top">
              <select name="users_type">
                <option value="<%= databases.getUsersType() %>"><%= mytext.display("pleaseselect") %>
                <option value="" <% if (databases.getUsersType().equals("")) { %>selected<% } %>><%= mytext.display("public") %>
                <option value="*" <% if (databases.getUsersType().equals("*")) { %>selected<% } %>><%= mytext.display("restricted") %>
                <option value="=" <% if (databases.getUsersType().equals("=")) { %>selected<% } %>><%= mytext.display("creator") %>
                <%= databases.usertype_select_options(db, databases.getUsersType()) %>
              </select>
            </td>
			<% } %>
			<% if (myconfig.get(db, "use_useraccessrestrictions").equals("yes")) { %>
            <td class="WCMinnerContentInputName" width="50" valign="top"><%= mytext.display("databases.accessrestrictions.user") %></td>
            <td class="WCMinnerContentInputValue" align="left" valign="top">
              <nobr>
              <input type="hidden" id="users_usersinput" name="users_users" value="<%= databases.getUsersUsers() %>">
              <select multiple id="users_users" name="selectusers_users" style="min-width: 200px;" onChange="changeUsers(this)">
                <option value=""><%= mytext.display("all") %></option>
		<%
		String[] myusers = databases.getUsersUsers().split(",");
		for (int i=0; i<myusers.length; i++) {
			String myuser = "" + myusers[i];
			if ((! myuser.equals("")) && (! myuser.equals("0"))) {
				%><option value="<%= myuser %>" selected><%= User.Username(db, myconfig, myuser) %></option> &nbsp;<%
			}
		}
		%>
              </select>
              <input type="button" value="<%= mytext.display("select") %>" onclick="openSelectContentItem('users_users', 'Users', '', 'Users', '');">
              </nobr>
            </td>
			<% } %>
          </tr>
			<% if (myconfig.get(db, "use_accessrestrictions").equals("all")) { %>
          <tr><td>&nbsp;</td></tr>
          <tr><th class="WCMinnerContentInputName" colspan="6" align="left"><%= mytext.display("databases.accessrestrictions.creators") %></th></tr>
          <tr>
			<% if (myconfig.get(db, "use_usergroups").equals("yes")) { %>
            <td class="WCMinnerContentInputName" width="50" valign="top"><%= mytext.display("databases.accessrestrictions.group") %></td>
            <td class="WCMinnerContentInputValue" valign="top">
              <select name="creators_group">
                <option value="<%= databases.getCreatorsGroup() %>"><%= mytext.display("pleaseselect") %>
                <option value="0" <% if (databases.getCreatorsGroup().equals("0")) { %>selected<% } %>><%= mytext.display("public") %>
                <option value="*" <% if (databases.getCreatorsGroup().equals("*")) { %>selected<% } %>><%= mytext.display("restricted") %>
                <option value="" <% if (databases.getCreatorsGroup().equals("")) { %>selected<% } %>><%= mytext.display("all_admins") %>
                <%= databases.usergroup_select_options(db, databases.getCreatorsGroup()) %>
              </select>
            </td>
			<% } %>
			<% if (myconfig.get(db, "use_usertypes").equals("yes")) { %>
            <td class="WCMinnerContentInputName" width="50" valign="top"><%= mytext.display("databases.accessrestrictions.type") %></td>
            <td class="WCMinnerContentInputValue" valign="top">
              <select name="creators_type">
                <option value="<%= databases.getCreatorsType() %>"><%= mytext.display("pleaseselect") %>
                <option value="0" <% if (databases.getCreatorsType().equals("0")) { %>selected<% } %>><%= mytext.display("public") %>
                <option value="*" <% if (databases.getCreatorsType().equals("*")) { %>selected<% } %>><%= mytext.display("restricted") %>
                <option value="" <% if (databases.getCreatorsType().equals("")) { %>selected<% } %>><%= mytext.display("all_admins") %>
                <%= databases.usertype_select_options(db, databases.getCreatorsType()) %>
              </select>
            </td>
			<% } %>
			<% if (myconfig.get(db, "use_useraccessrestrictions").equals("yes")) { %>
            <td class="WCMinnerContentInputName" width="50" valign="top"><%= mytext.display("databases.accessrestrictions.user") %></td>
            <td class="WCMinnerContentInputValue" align="left" valign="top">
              <nobr>
              <input type="hidden" id="creators_usersinput" name="creators_users" value="<%= databases.getCreatorsUsers() %>">
              <select multiple id="creators_users" name="selectcreators_users" style="min-width: 200px;" onChange="changeUsers(this)">
                <option value=""><%= mytext.display("all") %></option>
		<%
		String[] myusers = databases.getCreatorsUsers().split(",");
		for (int i=0; i<myusers.length; i++) {
			String myuser = "" + myusers[i];
			if ((! myuser.equals("")) && (! myuser.equals("0"))) {
				%><option value="<%= myuser %>" selected><%= User.Username(db, myconfig, myuser) %></option> &nbsp;<%
			}
		}
		%>
              </select>
              <input type="button" value="<%= mytext.display("select") %>" onclick="openSelectContentItem('creators_users', 'Users', '', 'Users', '');">
              </nobr>
            </td>
			<% } %>
          </tr>
          <tr><td>&nbsp;</td></tr>
          <tr><th class="WCMinnerContentInputName" colspan="6" align="left"><%= mytext.display("databases.accessrestrictions.editors") %></th></tr>
          <tr>
			<% if (myconfig.get(db, "use_usergroups").equals("yes")) { %>
            <td class="WCMinnerContentInputName" width="50" valign="top"><%= mytext.display("databases.accessrestrictions.group") %></td>
            <td class="WCMinnerContentInputValue" valign="top">
              <select name="editors_group">
                <option value="<%= databases.getEditorsGroup() %>"><%= mytext.display("pleaseselect") %>
                <option value="0" <% if (databases.getEditorsGroup().equals("0")) { %>selected<% } %>><%= mytext.display("public") %>
                <option value="*" <% if (databases.getEditorsGroup().equals("*")) { %>selected<% } %>><%= mytext.display("restricted") %>
                <option value="=" <% if (databases.getEditorsGroup().equals("=")) { %>selected<% } %>><%= mytext.display("creator") %>
                <option value="" <% if (databases.getEditorsGroup().equals("")) { %>selected<% } %>><%= mytext.display("all_admins") %>
                <%= databases.usergroup_select_options(db, databases.getEditorsGroup()) %>
              </select>
            </td>
			<% } %>
			<% if (myconfig.get(db, "use_usertypes").equals("yes")) { %>
            <td class="WCMinnerContentInputName" width="50" valign="top"><%= mytext.display("databases.accessrestrictions.type") %></td>
            <td class="WCMinnerContentInputValue" valign="top">
              <select name="editors_type">
                <option value="<%= databases.getEditorsType() %>"><%= mytext.display("pleaseselect") %>
                <option value="0" <% if (databases.getEditorsType().equals("0")) { %>selected<% } %>><%= mytext.display("public") %>
                <option value="*" <% if (databases.getEditorsType().equals("*")) { %>selected<% } %>><%= mytext.display("restricted") %>
                <option value="=" <% if (databases.getEditorsType().equals("=")) { %>selected<% } %>><%= mytext.display("creator") %>
                <option value="" <% if (databases.getEditorsType().equals("")) { %>selected<% } %>><%= mytext.display("all_admins") %>
                <%= databases.usertype_select_options(db, databases.getEditorsType()) %>
              </select>
            </td>
			<% } %>
			<% if (myconfig.get(db, "use_useraccessrestrictions").equals("yes")) { %>
            <td class="WCMinnerContentInputName" width="50" valign="top"><%= mytext.display("databases.accessrestrictions.user") %></td>
            <td class="WCMinnerContentInputValue" align="left" valign="top">
              <nobr>
              <input type="hidden" id="editors_usersinput" name="editors_users" value="<%= databases.getEditorsUsers() %>">
              <select multiple id="editors_users" name="selecteditors_users" style="min-width: 200px;" onChange="changeUsers(this)">
                <option value=""><%= mytext.display("all") %></option>
		<%
		String[] myusers = databases.getEditorsUsers().split(",");
		for (int i=0; i<myusers.length; i++) {
			String myuser = "" + myusers[i];
			if ((! myuser.equals("")) && (! myuser.equals("0"))) {
				%><option value="<%= myuser %>" selected><%= User.Username(db, myconfig, myuser) %></option> &nbsp;<%
			}
		}
		%>
              </select>
              <input type="button" value="<%= mytext.display("select") %>" onclick="openSelectContentItem('editors_users', 'Users', '', 'Users', '');">
              </nobr>
            </td>
			<% } %>
          </tr>
          <tr><td>&nbsp;</td></tr>
          <tr><th class="WCMinnerContentInputName" colspan="6" align="left"><%= mytext.display("databases.accessrestrictions.publishers") %></th></tr>
          <tr>
			<% if (myconfig.get(db, "use_usergroups").equals("yes")) { %>
            <td class="WCMinnerContentInputName" width="50" valign="top"><%= mytext.display("databases.accessrestrictions.group") %></td>
            <td class="WCMinnerContentInputValue" valign="top">
              <select name="publishers_group">
                <option value="<%= databases.getPublishersGroup() %>"><%= mytext.display("pleaseselect") %>
                <option value="" <% if (databases.getPublishersGroup().equals("")) { %>selected<% } %>><%= mytext.display("all_admins") %>
                <%= databases.usergroup_select_options(db, databases.getPublishersGroup()) %>
              </select>
            </td>
			<% } %>
			<% if (myconfig.get(db, "use_usertypes").equals("yes")) { %>
            <td class="WCMinnerContentInputName" width="50" valign="top"><%= mytext.display("databases.accessrestrictions.type") %></td>
            <td class="WCMinnerContentInputValue" valign="top">
              <select name="publishers_type">
                <option value="<%= databases.getPublishersType() %>"><%= mytext.display("pleaseselect") %>
                <option value="" <% if (databases.getPublishersType().equals("")) { %>selected<% } %>><%= mytext.display("all_admins") %>
                <%= databases.usertype_select_options(db, databases.getPublishersType()) %>
              </select>
            </td>
			<% } %>
			<% if (myconfig.get(db, "use_useraccessrestrictions").equals("yes")) { %>
            <td class="WCMinnerContentInputName" width="50" valign="top"><%= mytext.display("databases.accessrestrictions.user") %></td>
            <td class="WCMinnerContentInputValue" align="left" valign="top">
              <nobr>
              <input type="hidden" id="publishers_usersinput" name="publishers_users" value="<%= databases.getPublishersUsers() %>">
              <select multiple id="publishers_users" name="selectpublishers_users" style="min-width: 200px;" onChange="changeUsers(this)">
                <option value=""><%= mytext.display("all") %></option>
		<%
		String[] myusers = databases.getPublishersUsers().split(",");
		for (int i=0; i<myusers.length; i++) {
			String myuser = "" + myusers[i];
			if ((! myuser.equals("")) && (! myuser.equals("0"))) {
				%><option value="<%= myuser %>" selected><%= User.Username(db, myconfig, myuser) %></option> &nbsp;<%
			}
		}
		%>
              </select>
              <input type="button" value="<%= mytext.display("select") %>" onclick="openSelectContentItem('publishers_users', 'Users', '', 'Users', '');">
              </nobr>
            </td>
			<% } %>
          </tr>
          <tr><td>&nbsp;</td></tr>
          <tr><th class="WCMinnerContentInputName" colspan="6" align="left"><%= mytext.display("databases.accessrestrictions.administrators") %></th></tr>
          <tr>
			<% if (myconfig.get(db, "use_usergroups").equals("yes")) { %>
            <td class="WCMinnerContentInputName" width="50" valign="top"><%= mytext.display("databases.accessrestrictions.group") %></td>
            <td class="WCMinnerContentInputValue" valign="top">
              <select name="administrators_group">
                <option value="<%= databases.getAdministratorsGroup() %>"><%= mytext.display("pleaseselect") %>
                <option value="" <% if (databases.getAdministratorsGroup().equals("")) { %>selected<% } %>><%= mytext.display("all_admins") %>
                <%= databases.usergroup_select_options(db, databases.getAdministratorsGroup()) %>
              </select>
            </td>
			<% } %>
			<% if (myconfig.get(db, "use_usertypes").equals("yes")) { %>
            <td class="WCMinnerContentInputName" width="50" valign="top"><%= mytext.display("databases.accessrestrictions.type") %></td>
            <td class="WCMinnerContentInputValue" valign="top">
              <select name="administrators_type">
                <option value="<%= databases.getAdministratorsType() %>"><%= mytext.display("pleaseselect") %>
                <option value="" <% if (databases.getAdministratorsType().equals("")) { %>selected<% } %>><%= mytext.display("all_admins") %>
                <%= databases.usertype_select_options(db, databases.getAdministratorsType()) %>
              </select>
            </td>
			<% } %>
			<% if (myconfig.get(db, "use_useraccessrestrictions").equals("yes")) { %>
            <td class="WCMinnerContentInputName" width="50" valign="top"><%= mytext.display("databases.accessrestrictions.user") %></td>
            <td class="WCMinnerContentInputValue" align="left" valign="top">
              <nobr>
              <input type="hidden" id="administrators_usersinput" name="administrators_users" value="<%= databases.getAdministratorsUsers() %>">
              <select multiple id="administrators_users" name="selectadministrators_users" style="min-width: 200px;" onChange="changeUsers(this)">
                <option value=""><%= mytext.display("all") %></option>
		<%
		String[] myusers = databases.getAdministratorsUsers().split(",");
		for (int i=0; i<myusers.length; i++) {
			String myuser = "" + myusers[i];
			if ((! myuser.equals("")) && (! myuser.equals("0"))) {
				%><option value="<%= myuser %>" selected><%= User.Username(db, myconfig, myuser) %></option> &nbsp;<%
			}
		}
		%>
              </select>
              <input type="button" value="<%= mytext.display("select") %>" onclick="openSelectContentItem('administrators_users', 'Users', '', 'Users', '');">
              </nobr>
            </td>
			<% } %>
          </tr>
			<% } %>
		<% } else { %>
          <tr>
            <th class="WCMinnerContentInputName" valign="top" align="left"><%= mytext.display("databases.accessrestrictions.users") %></th>
			<% if (myconfig.get(db, "use_useraccessrestrictions").equals("yes")) { %>
            <td class="WCMinnerContentInputName" valign="top"><%= mytext.display("databases.accessrestrictions.user") %></td>
			<% } %>
          </tr>
          <tr>
            <td class="WCMinnerContentInputValue" valign="top">
              <select name="users_type">
                <option value="<%= databases.getUsersType() %>"><%= mytext.display("pleaseselect") %>
                <option value="" <% if (databases.getUsersType().equals("")) { %>selected<% } %>><%= mytext.display("public") %>
                <option value="*" <% if (databases.getUsersType().equals("*")) { %>selected<% } %>><%= mytext.display("restricted") %>
                <option value="=" <% if (databases.getUsersType().equals("=")) { %>selected<% } %>><%= mytext.display("creator") %>
              </select>
            </td>
			<% if (myconfig.get(db, "use_useraccessrestrictions").equals("yes")) { %>
            <td class="WCMinnerContentInputValue" align="left" valign="top">
              <nobr>
              <input type="hidden" id="users_usersinput" name="users_users" value="<%= databases.getUsersUsers() %>">
              <select multiple id="users_users" name="selectusers_users" style="min-width: 200px;" onChange="changeUsers(this)">
                <option value=""><%= mytext.display("all") %></option>
		<%
		String[] myusers = databases.getUsersUsers().split(",");
		for (int i=0; i<myusers.length; i++) {
			String myuser = "" + myusers[i];
			if ((! myuser.equals("")) && (! myuser.equals("0"))) {
				%><option value="<%= myuser %>" selected><%= User.Username(db, myconfig, myuser) %></option> &nbsp;<%
			}
		}
		%>
              </select>
              <input type="button" value="<%= mytext.display("select") %>" onclick="openSelectContentItem('users_users', 'Users', '', 'Users', '');">
              </nobr>
            </td>
			<% } %>
          </tr>
          <tr>
            <th class="WCMinnerContentInputName" valign="top" align="left"><%= mytext.display("databases.accessrestrictions.creators") %></th>
			<% if (myconfig.get(db, "use_useraccessrestrictions").equals("yes")) { %>
            <td class="WCMinnerContentInputName" valign="top"><%= mytext.display("databases.accessrestrictions.user") %></td>
			<% } %>
          </tr>
          <tr>
            <td class="WCMinnerContentInputValue" valign="top">
              <select name="creators_type">
                <option value="<%= databases.getCreatorsType() %>"><%= mytext.display("pleaseselect") %>
                <option value="0" <% if (databases.getCreatorsType().equals("0")) { %>selected<% } %>><%= mytext.display("public") %>
                <option value="*" <% if (databases.getCreatorsType().equals("*")) { %>selected<% } %>><%= mytext.display("restricted") %>
                <option value="" <% if (databases.getCreatorsType().equals("")) { %>selected<% } %>><%= mytext.display("all_admins") %>
              </select>
            </td>
			<% if (myconfig.get(db, "use_useraccessrestrictions").equals("yes")) { %>
            <td class="WCMinnerContentInputValue" align="left" valign="top">
              <nobr>
              <input type="hidden" id="creators_usersinput" name="creators_users" value="<%= databases.getCreatorsUsers() %>">
              <select multiple id="creators_users" name="selectcreators_users" style="min-width: 200px;" onChange="changeUsers(this)">
                <option value=""><%= mytext.display("all") %></option>
		<%
		String[] myusers = databases.getCreatorsUsers().split(",");
		for (int i=0; i<myusers.length; i++) {
			String myuser = "" + myusers[i];
			if ((! myuser.equals("")) && (! myuser.equals("0"))) {
				%><option value="<%= myuser %>" selected><%= User.Username(db, myconfig, myuser) %></option> &nbsp;<%
			}
		}
		%>
              </select>
              <input type="button" value="<%= mytext.display("select") %>" onclick="openSelectContentItem('creators_users', 'Users', '', 'Users', '');">
              </nobr>
            </td>
			<% } %>
          </tr>
		<% } %>
	<% } else { %>
          <tr>
            <td class="WCMinnerContentInputValue" align="left" colspan="4">
            <div><b><%= mytext.display("databases.accessrestrictions.disabled") %></b></div>
            <% if (mysession.get("username").equals(myconfig.get(db, "superadmin"))) { %>
            <%= mytext.display("databases.accessrestrictions.enableconfig") %>
            <% } else { %>
            <%= mytext.display("databases.accessrestrictions.enablesuperadmin") %>
            <% } %>
            </td>
          </tr>
	<% } %>
        </table>
</div></div>
<div id="Special_Pages" class="Special_Pages st_view"><div class="st_view_inner">
        <table width="100%">
          <tr> 
            <th class="WCMinnerContentHeading1" colspan="6" align="left"><%= mytext.display("databases.specialpages.heading") %></th>
          </tr>
          <tr> 
            <td class="WCMinnerContentIntro" colspan="6" align="left"><%= mytext.display("databases.specialpages.intro") %></td>
          </tr>
          <tr>
            <th class="WCMinnerContentInputName" align="left"><%= mytext.display("databases.specialpages.searchresults") %></th>
          </tr>
          <tr> 
            <td class="WCMinnerContentInputValue" colspan="2"> 
              <select id="searchresults" name="searchresults" style="width: 400px;">
                <option value="<%= databases.getSearchresults() %>"><%= mypage.elementTitle(mysession.get("administrator"), mysession.get("userid"), mysession.get("username"), mysession.get("usertype"), mysession.get("usergroup"), mysession.get("usertypes"), mysession.get("usergroups"), db, myconfig, "" + databases.getSearchresults()) %> &nbsp;
                <option value=""><%= mytext.display("none") %> 
              </select>
              <input type="button" value="<%= mytext.display("select") %>" onclick="openSelectContentItem('searchresults', 'Pages', '', 'Pages', 'page');">
            </td>
          </tr>
          <tr>
            <th class="WCMinnerContentInputName" align="left"><%= mytext.display("databases.specialpages.searchresult") %></th>
          </tr>
          <tr> 
            <td class="WCMinnerContentInputValue" colspan="2"> 
              <select id="searchresult" name="searchresult" style="width: 400px;">
                <option value="<%= databases.getSearchresult() %>"><%= mypage.elementTitle(mysession.get("administrator"), mysession.get("userid"), mysession.get("username"), mysession.get("usertype"), mysession.get("usergroup"), mysession.get("usertypes"), mysession.get("usergroups"), db, myconfig, "" + databases.getSearchresult()) %> &nbsp;
                <option value=""><%= mytext.display("none") %> 
              </select>
              <input type="button" value="<%= mytext.display("select") %>" onclick="openSelectContentItem('searchresult', 'Pages', '', 'Pages', 'page');">
            </td>
          </tr>
          <tr>
            <th class="WCMinnerContentInputName" align="left"><%= mytext.display("databases.specialpages.viewpage") %></th>
          </tr>
          <tr> 
            <td class="WCMinnerContentInputValue" colspan="2"> 
              <select id="viewpage" name="viewpage" style="width: 400px;">
                <option value="<%= databases.getViewPage() %>"><%= mypage.elementTitle(mysession.get("administrator"), mysession.get("userid"), mysession.get("username"), mysession.get("usertype"), mysession.get("usergroup"), mysession.get("usertypes"), mysession.get("usergroups"), db, myconfig, "" + databases.getViewPage()) %> &nbsp;
                <option value=""><%= mytext.display("none") %> 
              </select>
              <input type="button" value="<%= mytext.display("select") %>" onclick="openSelectContentItem('viewpage', 'Pages', '', 'Pages', 'page');">
            </td>
          </tr>
          <tr><td>&nbsp;</td></tr>
          <tr> 
            <th class="WCMinnerContentHeading1" colspan="6" align="left"><%= mytext.display("databases.index.heading") %></th>
          </tr>
          <tr> 
            <td class="WCMinnerContentIntro" colspan="6" align="left"><%= mytext.display("databases.index.intro") %></td>
          </tr>
          <tr> 
            <th class="WCMinnerContentInputName" colspan="6" align="left"><%= mytext.display("databases.index.adminindex") %></th>
          </tr>
          <tr> 
            <td class="WCMinnerContentInputValue" colspan="6">
              <input type="text" size="80" style="width: 100%;" id="adminindex" name="adminindex" value="<% if (databases.getAdminIndex().equals("")) { %>checkbox:25px default id:25px view:50px update:50px delete:50px<% } else { %><%= databases.getAdminIndex() %><% } %>">
            </td>
          </tr>
        </table>
</div></div>

    </div>
</div>

      </form>

</div></div>

<!-- #EndEditable -->

</div>
<div class="ui-layout-south">
<div class="ui-layout-content">
<table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr> 
    <td class="WCMfooter" colSpan="4" align="center"> 
      <%= mytext.display("footer") %>
    </td>
  </tr>
</table>
</div>
</div>
</body>
<!-- #EndTemplate --></html>
